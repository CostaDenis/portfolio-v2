@page "/projects"
@using System.Text.Json.Serialization
@using System.Text.Json
@inject HttpClient _Http

<PageTitle>Projetos</PageTitle>

<body>

    <div class="flex sm:flex justify-center sm:justify-start items-center sm:items-start
    mt-14 sm:mt-12 md:mt-10 lg:mt-8">

        <h2 class="font-sans text-4xl md:text-5xl lg:text-6xl text-(--ColorSecundary) block">
            Foco profissional
        </h2>

    </div>

    <div class="flex sm:flex justify-center sm:justify-start items-center sm:items-start
    mt-12 sm:mt-10 md:mt-8 lg:mt-6">

        <h3 class="font-sans text-3xl md:text-4xl lg:text-5xl text-(--ColorSecundary) block">
            Stack Principal
        </h3>
    </div>

    @if (MainTechs is null)
    {
        <p class="text-(--TextColor) text-xl md:text-2xl lg:text-3xl">Carregando tecnologias...</p>
    }
    else
    {
        <div class="mt-12 sm:mt-10 md:mt-8 lg:mt-6">
            <Board Techs="@MainTechs" />
        </div>
    }

    <div class="flex sm:flex justify-center sm:justify-start items-center sm:items-start
    mt-12 sm:mt-14 md:mt-16 lg:mt-18">

        <h3 class="font-sans text-3xl md:text-4xl lg:text-5xl text-(--ColorSecundary) block">
            Principais projetos
        </h3>
    </div>

    <div class="w-full h-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 
        justify-items-center gap-6 sm:gap-8 lg:gap-10 mb-20 sm:mb-6 md:mb-0
        mt-12 sm:mt-10 md:mt-8 lg:mt-6">

        @if (MainProjects is null)
        {
            <p class="text-(--TextColor) text-xl md:text-2xl lg:text-3xl">Carregando projetos...</p>
        }
        else
        {
            @foreach (var project in MainProjects)
            {
                <ProjectCard Project="@project" />
            }
        }

    </div>

    <div class="flex sm:flex justify-center sm:justify-start items-center sm:items-start
    mt-12 sm:mt-14 md:mt-16 lg:mt-18">

        <h3 class="font-sans text-3xl md:text-4xl lg:text-5xl text-(--ColorSecundary) block">
            Stack Complementar
        </h3>
    </div>

    @if (SecondaryTechs is null)
    {
        <p class="text-(--TextColor) text-xl md:text-2xl lg:text-3xl">Carregando tecnologias...</p>
    }
    else
    {
        <div class="mt-12 sm:mt-10 md:mt-8 lg:mt-6">
            <Board Techs="@SecondaryTechs" />
        </div>
    }

    <div class="flex sm:flex justify-center sm:justify-start items-center sm:items-start
    mt-12 sm:mt-14 md:mt-16 lg:mt-18">

        <h3 class="font-sans text-3xl md:text-4xl lg:text-5xl text-(--ColorSecundary) block">
            Projetos Complementares
        </h3>
    </div>

    <div class="w-full h-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 
        justify-items-center gap-6 sm:gap-8 lg:gap-10 mb-20 sm:mb-6 md:mb-0
        mt-12 sm:mt-10 md:mt-8 lg:mt-6">

        @if (SecondaryProjects is null)
        {
            <p class="text-(--TextColor) text-xl md:text-2xl lg:text-3xl">Carregando projetos...</p>
        }
        else
        {
            @foreach (var project in SecondaryProjects)
            {
                <ProjectCard Project="@project" />
            }
        }

    </div>

</body>

@code {

    private List<TechDTO>? MainTechs;
    private List<ProjectDTO>? MainProjects;
    private List<TechDTO>? SecondaryTechs;
    private List<ProjectDTO>? SecondaryProjects;

    protected override async Task OnInitializedAsync()
    {
        var options = new JsonSerializerOptions
        {
            PropertyNameCaseInsensitive = true
        };

        options.Converters.Add(new JsonStringEnumConverter());

        MainTechs = await _Http.GetFromJsonAsync<List<TechDTO>>(
        AssetUrl.NoCache("data/MainTechs.json"),
        options
        );

        MainProjects = await _Http.GetFromJsonAsync<List<ProjectDTO>>(
        AssetUrl.NoCache("data/MainProjects.json"),
        options
        );

        SecondaryTechs = await _Http.GetFromJsonAsync<List<TechDTO>>(
        AssetUrl.NoCache("data/SecondaryTechs.json"),
        options
        );

        SecondaryProjects = await _Http.GetFromJsonAsync<List<ProjectDTO>>(
        AssetUrl.NoCache("data/SecondaryProjects.json"),
        options
        );
    }

}